<%inherit file="base_admin.html" />
<script type="text/javascript" src="/static/js/ticket.js"></script>
<script language="javascript" type="text/javascript">
function imposeMaxLength(Object, MaxLen)
{
  return (Object.value.length <= MaxLen);
}
</script>
<script type="text/javascript">


function assigndepartment(id,obj,form)
{
	var issueType= obj.options[obj.selectedIndex].value;
	var issuename= obj.options[obj.selectedIndex].text;
	$.post("/ticket/departmentassign",{ticketId:id,issueType:issueType},function(data){
	if(data == "1")
	{
	inlineMsg(form,'${ticket.id}',"department is changed");
	}
	});
}

function assignmemeber(id,obj,form)
{
	var asssigneTo = obj.options[obj.selectedIndex].value;
	var asssigneToname = obj.options[obj.selectedIndex].text;
	$.post("/ticket/memberassign",{id:id, asssigneTo:asssigneTo},function(data){
	if(data == "1")
	{
	inlineMsg(form,'${ticket.id}',"Ticket assigned");
	}
	});
}

function assignsla(id,obj,form)
{
	var sla= obj.options[obj.selectedIndex].value;
	var slaname= obj.options[obj.selectedIndex].text;
	$.post("/ticket/slaassign",{ticketId:id, sla:sla},function(data){
	if(data == "1")
	{
	inlineMsg(form,'${ticket.id}',"Ticket sla changed");
	}
	});
}

function assignCustPackage(id,obj)
{
	var custPkg = obj.options[obj.selectedIndex].value;
	var custPkgname = obj.options[obj.selectedIndex].text;
	var retVal1 = confirm("Assign to " + custPkgname + " package ?");

		if( retVal1 == true )
		{
			$.post("/ticket/custPackage",{ticketId:id, custpkg:custPkg},function(data){
			if(data == "1")
			{
				
			}
		});
		}
	else{
		return false;
	}
}


function modifyassignvalue(id)
{
	var ticketId = id;
//	var make = $("#make").val();
	var system_id = $("#system_id").val();
	var problem = $("#problem").val();
	$.post("/ticket/assign/modify",{ticketId:ticketId,system_id:system_id,problem:problem},function(data){
		if(data == "1"){
			alert("Modified Data");
			window.location.href="/ticket/assign";
		}
		else{
			window.location.href="/ticket/assign";
		}
	});
}


</script>

