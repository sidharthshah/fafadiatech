<%inherit file="customer_base.html" />

<script  type="text/javascript" language="javascript">
function displayTicketCustDetails(id)
{
	var addForm = document.getElementById("customer_ticket_summary");
	addForm.action="/ticket/displyinfo?id="+id;
	addForm.method="POST";
	addForm.submit();
}

function displaycusttickethistory(id)
{
	var addForm = document.getElementById("customer_ticket_summary");
	addForm.action="/ticket/dispaycustomerticketactivity?tkId="+id;
	addForm.method="POST";
	addForm.submit();
}

function pagination(type,first,last)
{
var addForm = document.getElementById("customer_ticket_summary");
if(type=="previous"){
	addForm.action="/customerdashboardbackpage?first="+first+"&last="+last;
}
else if(type=="next")
{
	addForm.action="/customerdashboardnextpage?first="+first+"&last="+last;
	
}
	addForm.method="POST";
	addForm.submit();
}

</script>

<form name="customer_ticket_summary" id="customer_ticket_summary" action="" method="">
<table>
<ul class="pager">
	%if not first < 20:
	<li>
		<a href="#" onclick="javascript:pagination('previous',${first},${last})"> Previous</a>
	</li>
	%endif
	<% dcount = count %>
	%if dcount > last:
    	<li>
    		<a href="#" onclick="javascript:pagination('next',${first},${last})">Next</a>
    	</li>
	%endif
</ul>
<tr>
	<th>Ticket Id</th>
	<th>Department</th>
	<th>Status</th>
	<th>Assigned To</th>
	<th>Action</th>
</tr>
%if status != []:
	%for i in status:
	<tr>
		<td><a href="#" id="${i[0]}" onclick="javascript:displaycusttickethistory(id)">${i[0]}</a></td>
		<td>${i[4]}</td>
		<td>${i[5]}</td>
		<td>${i[3]}</td>
		<td><a href="#" id="${i[0]}" onclick="javascript:displayTicketCustDetails(id)">Details</a></td>	
	</tr>
	%endfor
%else:
	<tr>
		<td colspan="5" style="padding-top:5%;"><h2 style="color:#0069D6;"><center>Data Not Found</center></h2></td>
	</tr>
%endif
</table>
</form>
